{% extends 'base.html' %}

{% block title %}Delete Account - {{ app_name }}{% endblock %}

{% block main_class %}pb-20 md:pb-0{% endblock %}

{% block footer %}{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <a href="{{ url_for('settings.index') }}" class="inline-flex items-center text-gray-400 hover:text-white mb-6">
        <i data-lucide="arrow-left" class="w-4 h-4 mr-2"></i>
        Back to Settings
    </a>

    <div class="bg-surface-900 rounded-xl border border-red-500/20 p-6">
        <div class="flex items-center space-x-3 mb-6">
            <div class="w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center">
                <i data-lucide="alert-triangle" class="w-6 h-6 text-red-400"></i>
            </div>
            <div>
                <h1 class="font-display text-xl font-bold text-white">Delete Account</h1>
                <p class="text-gray-400">This action cannot be undone</p>
            </div>
        </div>

        <!-- Export Data Option -->
        <div class="bg-surface-800 rounded-lg p-4 mb-6 border border-white/5">
            <h3 class="font-semibold text-white mb-2">Before you go...</h3>
            <p class="text-sm text-gray-400 mb-3">
                You can download a copy of all your data before deleting your account.
            </p>
            <a href="{{ url_for('settings.export_data') }}"
               class="inline-flex items-center px-4 py-2 bg-surface-700 hover:bg-surface-600 text-white rounded-lg text-sm transition">
                <i data-lucide="download" class="w-4 h-4 mr-2"></i>
                Download My Data
            </a>
        </div>

        <div class="bg-red-500/10 rounded-lg p-4 mb-6 border border-red-500/20">
            <h3 class="font-semibold text-red-400 mb-2">What happens when you delete your account:</h3>
            <ul class="text-sm text-red-300/80 space-y-1">
                <li class="flex items-start">
                    <i data-lucide="x" class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0"></i>
                    Your profile will be permanently removed
                </li>
                <li class="flex items-start">
                    <i data-lucide="x" class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0"></i>
                    All your matches and conversations will be deleted
                </li>
                <li class="flex items-start">
                    <i data-lucide="x" class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0"></i>
                    Your photos will be permanently removed from our servers
                </li>
                <li class="flex items-start">
                    <i data-lucide="x" class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0"></i>
                    You will not be able to recover your account
                </li>
            </ul>
        </div>

        <form method="POST" class="space-y-5">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <div>
                <label class="block text-sm font-medium text-gray-300 mb-1">
                    Enter your password
                </label>
                <input type="password" name="password" required autocomplete="current-password"
                       class="w-full px-4 py-2.5 bg-surface-800 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:ring-2 focus:ring-red-500 focus:border-transparent">
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-300 mb-1">
                    Type <span class="text-red-400 font-mono">delete my account</span> to confirm
                </label>
                <input type="text" name="confirm_text" required autocomplete="off"
                       placeholder="delete my account"
                       class="w-full px-4 py-2.5 bg-surface-800 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:ring-2 focus:ring-red-500 focus:border-transparent">
            </div>

            <div class="flex space-x-4 pt-2">
                <a href="{{ url_for('settings.index') }}"
                   class="flex-1 px-4 py-2.5 border border-white/10 rounded-lg text-gray-300 hover:bg-surface-800 transition text-center">
                    Cancel
                </a>
                <button type="submit"
                        class="flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium">
                    Permanently Delete
                </button>
            </div>
        </form>
    </div>

    <!-- Alternative: Pause Account -->
    <div class="mt-6 bg-surface-900 rounded-xl border border-white/5 p-6">
        <h3 class="font-semibold text-white mb-2">Not ready to leave?</h3>
        <p class="text-sm text-gray-400 mb-4">
            You can pause your account instead. This will hide your profile from other users, but you can come back anytime.
        </p>
        <a href="{{ url_for('settings.pause_account') }}"
           class="inline-flex items-center text-amber-400 hover:text-amber-300 text-sm font-medium">
            <i data-lucide="pause-circle" class="w-4 h-4 mr-2"></i>
            Pause my account instead
        </a>
    </div>
</div>
{% endblock %}
